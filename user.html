<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Absensi Peserta</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" type="image/png" href="icon-absensi.png">

    <style>
        /* ===== RESET & GLOBAL ===== */
        html,
        body {
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
            font-family: 'Segoe UI', sans-serif;
            background: #f0f4f8;
            color: #333;
        }

        /* CONTAINER */
        .container {
            max-width: 1000px;
            margin: auto;
            padding: 16px;
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
        }

        /* ===== TYPOGRAPHY & HEADERS ===== */

        h2 {
            font-size: 1.75rem;
            color: #2c3e50;
            text-align: center;
            margin: 24px 0;
            position: relative;
        }

        h2::after {
            content: "";
            display: block;
            width: 60px;
            height: 4px;
            background: #4caf50;
            margin: 8px auto 0;
            border-radius: 2px;
        }

        footer {
            background: #2c3e50;
            color: white;
            text-align: center;
            padding: 12px;
            font-size: 14px;
            width: 100%;
            position: relative;
            margin-top: auto;
        }


        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
            padding: 0 12px;
        }

        .header-container .left,
        .header-container .right {
            width: 100px;
            text-align: center;
        }

        .header-container .center {
            flex: 1;
            text-align: center;
        }

        .header-container h2 {
            margin: 0;
            font-size: 1.75rem;
            color: #2c3e50;
            position: relative;
        }

        .kembali-btn {
            background: #f44336;
            color: white;
            border: none;
            padding: 6px 7px;
            border-radius: 6px;
            cursor: pointer
        }

        .jam {
            position: absolute;
            top: 35px;
            background: rgba(255, 255, 255, 0.8);
            padding: 6px 12px;
            border-radius: 12px;
            font-weight: bold;
            font-size: 0.95rem;
            color: #2c3e50;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }




        /* ===== FORM & PREVIEW ===== */
        .wrap-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 24px;
        }

        .form-kiri,
        .daftar-kanan {
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 24px;
            width: 100%;
            max-width: 360px;
        }

        input,
        select,
        button {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 6px;
            transition: border-color .2s;
        }

        input:focus,
        select:focus {
            border-color: #4caf50;
            outline: none;
        }

        button {
            background: #4caf50;
            color: #fff;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: background .2s;
        }

        button:hover {
            background: #388e3c;
        }

        .preview-foto {
            text-align: center;
            margin: 16px 0;
            min-height: 100px; /* Ensure space for preview */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .preview-foto img {
            display: block;
            margin: 0 auto;
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 50%;
            border: 2px solid #4caf50;
        }

        .status {
            text-align: center;
            margin-top: 12px;
            font-weight: bold;
            font-size: .9rem;
        }

        /* ===== DAFTAR PESERTA ===== */
        .daftar-kanan h3 {
            font-size: 1.1rem;
            text-align: center;
            margin-bottom: 12px;
        }

        ul#daftarPeserta {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 240px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            background: #fff;
        }

        ul#daftarPeserta li {
            padding: 10px;
            border-bottom: 1px solid #eee;
            font-size: .95rem;
            color: #555;
        }

        ul#daftarPeserta li:last-child {
            border-bottom: none;
        }

        /* ===== TABEL ABSENSI ===== */
        h2+input {
            display: block;
            margin: 16px auto;
            max-width: 360px;
        }

        .tabel-container {
            overflow-x: auto;
            margin-top: 12px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        thead th {
            background: #4caf50;
            color: #fff;
            padding: 12px;
            font-size: .95rem;
            text-align: left;
        }

        tbody tr:nth-child(even) {
            background: #f9f9f9;
        }

        tbody tr:hover {
            background: #f1fdf1;
        }

        td {
            padding: 10px;
            font-size: .9rem;
            border-bottom: 1px solid #eee;
        }

        /* status badge */
        .status-tepat,
        .status-terlambat {
            font-weight: bold;
        }

        .status-tepat {
            color: #2e7d32;
        }

        .status-terlambat {
            color: #c62828;
        }

        .status-bolos {
            color: #b71c1c;
            font-weight: bolder;
        }

        .status-izin,
        .status-sakit {
            color: #f57c00;
            font-weight: bold;

        }

        /* Loading Overlay Styles */
        #loadingOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001; /* Higher than other elements */
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s, opacity 0.3s linear;
        }

        #loadingOverlay.show {
            visibility: visible;
            opacity: 1;
        }

        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border-left-color: #4caf50; /* Green color for spinner */
            animation: spin 1s ease infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }


        /* ===== RESPONSIVE ===== */
        /* ============================= */
        /* ======== RESPONSIVE ========= */
        /* ============================= */

        /* Tablet dan ke bawah (max-width: 768px) */
        @media (max-width: 768px) {
            .container {
                padding: 12px;
            }

            .wrap-container {
                flex-direction: column;
                align-items: center;
            }

            .form-kiri,
            .daftar-kanan {
                max-width: 100%;
                padding: 16px;
            }

            input,
            select,
            button {
                font-size: 0.95rem;
                padding: 10px;
            }

            .preview-foto img {
                width: 70px;
                height: 70px;
            }

            ul#daftarPeserta li {
                font-size: 0.9rem;
                padding: 8px;
            }

            table thead th,
            table td {
                padding: 8px;
                font-size: 0.85rem;
            }

            .status {
                font-size: 0.9rem;
            }
        }

        /* HP kecil (max-width: 480px) */
        @media (max-width: 480px) {
            h2 {
                font-size: 1.4rem;
                margin: 12px 0;
            }

            .header-container {
                flex-direction: column;
                align-items: center;
                gap: 10px;
            }

            .header-container .left,
            .header-container .right {
                width: 100%;
                text-align: center;
            }

            .kembali-btn {
                font-size: 0.95rem;
                padding: 4px 10px;
            }

            .jam {
                font-size: 0.9rem;
                padding: 4px 12px;
                position: relative;
                top: 0;
                background: rgba(255, 255, 255, 0.8);
                padding: 6px 12px;
                border-radius: 12px;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
            }

            button,
            input,
            select {
                font-size: 0.9rem;
                padding: 8px;
            }

            .preview-foto img {
                width: 60px;
                height: 60px;
            }

            ul#daftarPeserta {
                max-height: 180px;
            }

            table thead th,
            table td {
                padding: 6px;
                font-size: 0.8rem;
            }

            .status {
                font-size: 0.85rem;
            }
        }

        /* Layar besar (min-width: 1024px) */
        @media (min-width: 1024px) {

            .form-kiri,
            .daftar-kanan {
                max-width: 400px;
            }

            h2 {
                font-size: 2rem;
            }

            .jam {
                font-size: 1rem;
            }

            .kembali-btn {
                font-size: 1rem;
            }

            table thead th,
            table td {
                font-size: 1rem;
            }
        }
    </style>
</head>

<body style="display:flex; flex-direction:column; min-height:100vh;">

    <div class="container" style="flex:1;">

        <div class="header-container">
            <div class="left">
                <button class="kembali-btn" onclick="location.href='index.html'">Kembali</button>
            </div>
            <div class="center">
                <h2>Form Absensi Peserta</h2>
            </div>
            <div class="right">
                <div class="jam" id="jamSekarang">--:--:--</div>
            </div>
        </div>



        <div class="wrap-container">
            <div class="form-kiri">
                <form id="formAbsen">
                    <input type="text" id="nomorInput" placeholder="Masukkan Nomor Anda" required>
                    <select id="alasanInput">
                        <option value="Hadir">Hadir</option>
                        <option value="Sakit">Sakit</option>
                        <option value="Izin">Izin</option>
                        <option value="Bolos">Bolos</option>
                    </select>

                    <div id="previewPeserta" class="preview-foto"></div>

                    <!-- <button type="button" id="btnMasuk">Absen Masuk</button> -->
                    <button type="button" id="btnPulang">Absen Pulang</button>
                    <div class="status" id="statusPesan"></div>
                </form>
            </div>

            <div class="daftar-kanan">
                <h3>Daftar Peserta</h3>
                <ul id="daftarPeserta"></ul>
            </div>
        </div>

        <h2>Data Absensi</h2>
        <input type="text" id="cariInput" placeholder="Cari nama..." oninput="renderTabel()">

        <div class="tabel-container">
            <table>
                <thead>
                    <tr>
                        <th>No</th>
                        <th>Nama</th>
                        <th>Nomor</th>
                        <th>Pulang</th>
                        <th>Status</th>
                        <th>Alasan</th>
                    </tr>
                </thead>
                <tbody id="absenBody"></tbody>
            </table>
        </div>
    </div>
    <footer>
        <p class="mb-0">&copy; 2025 Absensi Digital ‚Ä¢ Dibuat oleh <a href="https://portfolio-chx.netlify.app/"
                target="_blank" class="text-info text-decoration-none">Chandra </a></p>
    </footer>

    <!-- Loading Overlay -->
    <div id="loadingOverlay">
        <div class="spinner"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
        import {
            getDatabase, ref, set, update, get, child
        } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-database.js";

        // Firebase config
        const firebaseConfig = {
            apiKey: "AIzaSyDOmBwvur0gJVvyzqLff-e_YjFpkyYvOCM",
            authDomain: "absensi-chx.firebaseapp.com",
            databaseURL: "https://absensi-chx-default-rtdb.firebaseio.com",
            projectId: "absensi-chx",
            storageBucket: "absensi-chx.appspot.com",
            messagingSenderId: "891248981960",
            appId: "1:891248981960:web:c0060ff1de18e61608b2fd"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        const pesertaRef = ref(db, 'peserta');
        const absensiRef = ref(db, 'absensi');

        // Elemen DOM
        const nomorInput = document.getElementById("nomorInput");
        const alasanInput = document.getElementById("alasanInput");
        const statusPesan = document.getElementById("statusPesan");
        const previewPeserta = document.getElementById("previewPeserta");
        const btnPulang = document.getElementById("btnPulang");
        const loadingOverlay = document.getElementById('loadingOverlay');

        // Fungsi untuk menampilkan loading overlay
        function showLoading() {
            loadingOverlay.classList.add('show');
        }

        // Fungsi untuk menyembunyikan loading overlay
        function hideLoading() {
            loadingOverlay.classList.remove('show');
        }

        // Load daftar peserta
        async function loadPeserta() {
            showLoading();
            try {
                const snap = await get(pesertaRef);
                const list = document.getElementById("daftarPeserta");
                list.innerHTML = "";
                if (snap.exists()) {
                    const pesertaData = snap.val();
                    const now = new Date();
                    const tanggalHariIni = now.toISOString().slice(0, 10);
                    const todayAbsensiSnap = await get(child(absensiRef, tanggalHariIni));
                    const absentToday = todayAbsensiSnap.exists() ? todayAbsensiSnap.val() : {};

                    // Urutkan peserta berdasarkan nomor unik
                    const sortedPeserta = Object.entries(pesertaData).sort(([nomorA], [nomorB]) => 
                        nomorA.localeCompare(nomorB, undefined, { numeric: true })
                    );

                    sortedPeserta.forEach(([nomor, p]) => {
                        // Hanya tambahkan jika peserta belum absen hari ini
                        if (!absentToday[nomor] || !absentToday[nomor].waktuPulang) {
                            const li = document.createElement("li");
                            li.textContent = `${p.nama} (${nomor})`;
                            list.appendChild(li);
                        }
                    });
                    return pesertaData; // Mengembalikan data peserta untuk penggunaan lain
                }
                return {}; // Mengembalikan objek kosong jika tidak ada data
            } catch (error) {
                console.error("Gagal memuat daftar peserta:", error);
                showAlert("Gagal memuat daftar peserta.", "gagal");
                return {};
            } finally {
                hideLoading();
            }
        }

        // Absen hanya pulang
        async function absen(tipe) {
            showLoading(); // Tampilkan loading saat memulai proses absen
            const nomor = nomorInput.value.trim();
            const alasan = alasanInput.value;
            statusPesan.textContent = ""; // Bersihkan pesan sebelumnya

            if (!nomor) {
                statusPesan.textContent = "‚ùå Nomor peserta harus diisi!";
                statusPesan.style.color = "red";
                hideLoading();
                return;
            }

            try {
                const pesertaSnap = await get(child(ref(db), `peserta/${nomor}`));
                if (!pesertaSnap.exists()) {
                    statusPesan.textContent = "‚ùå Nomor tidak ditemukan!";
                    statusPesan.style.color = "red";
                    hideLoading();
                    return;
                }

                const p = pesertaSnap.val();
                // Pratinjau akan diupdate oleh event listener nomorInput, jadi tidak perlu di sini lagi
                // previewPeserta.innerHTML = p.foto ?
                //     `<img src="${p.foto}" alt="${p.nama}"/><div><strong>${p.nama}</strong></div>` :
                //     `<div><strong>${p.nama}</strong></div>`;
                // setTimeout(() => previewPeserta.innerHTML = "", 3000); // Hapus pratinjau setelah 3 detik

                const now = new Date();
                const tanggal = now.toISOString().slice(0, 10);
                const todayRef = ref(db, `absensi/${tanggal}/${nomor}`);
                const todaySnap = await get(todayRef);

                // ===== HANYA LOGIKA ABSEN PULANG YANG DIGUNAKAN =====
                if (tipe === "pulang") {
                    const dataAbsen = todaySnap.val();
                    if (dataAbsen && dataAbsen.waktuPulang) {
                        statusPesan.textContent = "‚ùå Anda sudah melakukan absen pulang hari ini!";
                        statusPesan.style.color = "red";
                        hideLoading();
                        return;
                    }

                    // Ambil batas waktu dari admin, jika tidak ada, default ke "16:00"
                    const batasWaktuString = localStorage.getItem("jamBatasPulang") || "16:00";
                    const [batasJam, batasMenit] = batasWaktuString.split(':').map(Number);

                    let statusPulang = "";
                    const jamSekarang = now.getHours();
                    const menitSekarang = now.getMinutes();

                    if (alasan === "Sakit" || alasan === "Izin") {
                        statusPulang = alasan; // Jika sakit atau izin, status mengikuti alasan
                    } else {
                        // Bandingkan waktu saat ini dengan batas waktu dari admin
                        if (jamSekarang < batasJam || (jamSekarang === batasJam && menitSekarang < batasMenit)) {
                            statusPulang = "Bolos"; // Pulang sebelum waktunya
                        } else {
                            statusPulang = "Tepat Waktu"; // Pulang tepat waktu atau lebih
                        }
                    }

                    const dataToSet = {
                        ...dataAbsen, // Pertahankan data lama jika ada (misal: waktuMasuk, jika suatu saat ditambahkan)
                        nama: p.nama,
                        nomor,
                        waktuPulang: now.toISOString(),
                        status: statusPulang,
                        alasan: alasan,
                        tanggal: tanggal
                    };

                    // Jika belum ada data sama sekali hari ini, pakai set. Jika sudah ada, pakai update.
                    if (!todaySnap.exists()) {
                        await set(todayRef, { waktuMasuk: "", ...dataToSet }); // waktuMasuk tetap kosong
                    } else {
                        await update(todayRef, dataToSet);
                    }

                    const pesanSukses = {
                        "Bolos": "‚ùå Bolos! Anda pulang terlalu cepat.",
                        "Tepat Waktu": "‚úÖ Absen pulang berhasil, Tepat Waktu!",
                        "Sakit": "üü° Absen pulang karena Sakit.",
                        "Izin": "üü° Absen pulang karena Izin."
                    };
                    const warnaPesan = {
                        "Bolos": "red",
                        "Tepat Waktu": "green",
                        "Sakit": "orange",
                        "Izin": "orange"
                    };

                    statusPesan.textContent = pesanSukses[statusPulang] || "Absen pulang berhasil.";
                    statusPesan.style.color = warnaPesan[statusPulang] || "green";
                }

                document.getElementById("formAbsen").reset();
                previewPeserta.innerHTML = ""; // Kosongkan preview setelah absen
                loadPeserta(); // Perbarui daftar peserta yang belum absen
                renderTabel(); // Perbarui tabel setelah absen
            } catch (error) {
                console.error("Gagal melakukan absen:", error);
                statusPesan.textContent = "Terjadi kesalahan saat absen. Coba lagi.";
                statusPesan.style.color = "red";
            } finally {
                hideLoading(); // Sembunyikan loading setelah proses selesai
            }
        }

        // Render tabel absensi
        async function renderTabel() {
            showLoading();
            const tbody = document.getElementById("absenBody");
            const q = document.getElementById("cariInput").value.toLowerCase();
            tbody.innerHTML = "";

            try {
                const pesertaSnap = await get(pesertaRef);
                const absensiSnap = await get(absensiRef);

                if (!absensiSnap.exists() || !pesertaSnap.exists()) {
                    tbody.innerHTML = `
                        <tr>
                            <td colspan="6" style="text-align:center; color:#999;">
                                ‚ùó Belum ada data absensi atau peserta.
                            </td>
                        </tr>`;
                    hideLoading();
                    return;
                }

                const semuaPeserta = pesertaSnap.val();
                const totalPeserta = Object.keys(semuaPeserta).length;

                const now = new Date();
                const tanggalHariIni = now.toISOString().slice(0, 10);
                const dataHariIni = absensiSnap.val()[tanggalHariIni];

                // Jika tidak ada data sama sekali hari ini
                if (!dataHariIni) {
                    const tr = document.createElement("tr");
                    tr.innerHTML = `
                        <td colspan="6" style="text-align:center; color:#999;">
                            ‚ùó Belum ada data absensi hari ini.
                        </td>`;
                    tbody.appendChild(tr);
                    hideLoading();
                    return;
                }

                const jumlahAbsen = Object.keys(dataHariIni).length;

                // Jika sudah semua absen, tampilkan hanya pesan saja
                if (jumlahAbsen === totalPeserta) {
                    const tr = document.createElement("tr");
                    tr.innerHTML = `
                        <td colspan="6" style="text-align:center; font-weight:bold; color:green;">
                            ‚úÖ Absensi lengkap hari ini (${jumlahAbsen}/${totalPeserta})
                        </td>`;
                    tbody.appendChild(tr);
                    hideLoading();
                    return;
                }

                // Jika belum lengkap, tampilkan data peserta
                let no = 1;
                const dataArray = Object.entries(dataHariIni)
                    .filter(([nomor, a]) => semuaPeserta[nomor] && (a.nama || "").toLowerCase().includes(q))
                    .sort(([, a1], [, a2]) => (a1.nama || '').localeCompare(a2.nama || '')); // Urutkan berdasarkan nama

                dataArray.forEach(([, a]) => {
                    const tr = document.createElement("tr");
                    tr.innerHTML = `
                        <td>${no++}</td>
                        <td>${a.nama}</td>
                        <td>${a.nomor}</td>     
                        <td>${a.waktuPulang ? new Date(a.waktuPulang).toLocaleString("id-ID") : "-"}</td>
                        <td class="${a.status === 'Terlambat' ? 'status-terlambat' : a.status === 'Bolos' ? 'status-bolos' : a.status === 'Izin' ? 'status-izin' : a.status === 'Sakit' ? 'status-sakit' : 'status-tepat'}">${a.status || "-"}</td>
                        <td>${a.alasan}</td>
                    `;
                    tbody.appendChild(tr);
                });
            } catch (error) {
                console.error("Gagal merender tabel absensi:", error);
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" style="text-align:center; color:red;">
                            Terjadi kesalahan saat memuat data tabel.
                        </td>
                    </tr>`;
            } finally {
                hideLoading();
            }
        }

        // Fungsi untuk memperbarui jam digital
        function updateJam() {
            const now = new Date();
            const jam = now.toLocaleTimeString("id-ID", { hour12: false });
            document.getElementById("jamSekarang").textContent = jam;
        }
        setInterval(updateJam, 1000); // Perbarui setiap detik
        updateJam(); // Panggil sekali saat inisialisasi

        // Event listener untuk input nomor (pratinjau peserta)
        nomorInput.addEventListener("input", async () => {
            const nomor = nomorInput.value.trim();
            previewPeserta.innerHTML = ""; // Bersihkan pratinjau sebelumnya
            statusPesan.textContent = ""; // Bersihkan pesan status

            if (nomor.length > 0) {
                showLoading();
                try {
                    const pesertaSnap = await get(child(ref(db), `peserta/${nomor}`));
                    if (pesertaSnap.exists()) {
                        const p = pesertaSnap.val();
                        previewPeserta.innerHTML = p.foto ?
                            `<img src="${p.foto}" alt="${p.nama}"/><div><strong>${p.nama}</strong></div>` :
                            `<div><strong>${p.nama}</strong></div>`;
                        statusPesan.textContent = "‚úÖ Nomor ditemukan!";
                        statusPesan.style.color = "green";
                    } else {
                        statusPesan.textContent = "‚ùå Nomor tidak ditemukan.";
                        statusPesan.style.color = "red";
                    }
                } catch (error) {
                    console.error("Error fetching participant for preview:", error);
                    statusPesan.textContent = "Terjadi kesalahan saat mencari nomor.";
                    statusPesan.style.color = "red";
                } finally {
                    hideLoading();
                }
            }
        });

        // Init
        loadPeserta(); // Memuat daftar peserta saat halaman dimuat
        renderTabel(); // Merender tabel absensi saat halaman dimuat

        // Sembunyikan tombol absen masuk (sesuai permintaan)
        // document.getElementById("btnMasuk").style.display = "none";

        // Event listener untuk tombol Absen Pulang
        btnPulang.onclick = async () => {
            // Nonaktifkan tombol dan tampilkan pesan memproses
            btnPulang.disabled = true;
            btnPulang.style.backgroundColor = "#ccc"; // abu-abu
            btnPulang.style.color = "#666"; // teks agak gelap
            btnPulang.textContent = "Memproses...";

            await absen("pulang"); // Panggil fungsi absen

            // Kembalikan tombol ke keadaan semula setelah jeda 3 detik
            setTimeout(() => {
                btnPulang.disabled = false;
                btnPulang.style.backgroundColor = "#4caf50"; // hijau semula
                btnPulang.style.color = "#fff";
                btnPulang.textContent = "Absen Pulang";
                statusPesan.textContent = ""; // Hapus pesan status setelah tombol aktif kembali
            }, 3000);
        };

        // Event listener untuk tombol Enter di form
        document.getElementById("formAbsen").addEventListener("keydown", function (e) {
            if (e.key === "Enter") {
                e.preventDefault(); // mencegah form ke-submit default
                btnPulang.click(); // Simulasikan klik tombol absen pulang
            }
        });

    </script>
</body>

</html>
